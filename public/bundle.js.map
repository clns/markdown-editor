{"version":3,"sources":["webpack:///./main.js","webpack:///./js/pagedown.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["import * as kkt from './js/pagedown';\r\n\r\nconsole.log(kkt);\n\n\n/** WEBPACK FOOTER **\n ** ./main.js\n **/","var util = {},\r\n\tre = window.RegExp,\r\n\tSETTINGS = {\r\n\t\tlineLength: 72\r\n\t};\r\n\r\nvar defaultsStrings = {\r\n\tbold: \"Strong <strong> Ctrl/Cmd+B\",\r\n\tboldexample: \"strong text\",\r\n\r\n\titalic: \"Emphasis <em> Ctrl/Cmd+I\",\r\n\titalicexample: \"emphasized text\",\r\n\r\n\tlink: \"Hyperlink <a> Ctrl/Cmd+L\",\r\n\tlinkdescription: \"enter link description here\",\r\n\tlinkdialog: \"<p><b>Insert Hyperlink</b></p><p>http://example.com/ \\\"optional title\\\"</p>\",\r\n\r\n\tquote: \"Blockquote <blockquote> Ctrl/Cmd+Q\",\r\n\tquoteexample: \"Blockquote\",\r\n\r\n\tcode: \"Code Sample <pre><code> Ctrl/Cmd+K\",\r\n\tcodeexample: \"enter code here\",\r\n\r\n\timage: \"Image <img> Ctrl/Cmd+G\",\r\n\timagedescription: \"enter image description here\",\r\n\timagedialog: \"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \\\"optional title\\\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>\",\r\n\r\n\tolist: \"Numbered List <ol> Ctrl/Cmd+O\",\r\n\tulist: \"Bulleted List <ul> Ctrl/Cmd+U\",\r\n\tlitem: \"List item\",\r\n\r\n\theading: \"Heading <h1>/<h2> Ctrl/Cmd+H\",\r\n\theadingexample: \"Heading\",\r\n\r\n\thr: \"Horizontal Rule <hr> Ctrl/Cmd+R\",\r\n\r\n\tundo: \"Undo - Ctrl/Cmd+Z\",\r\n\tredo: \"Redo - Ctrl/Cmd+Y\",\r\n\r\n\thelp: \"Markdown Editing Help\"\r\n};\r\n\r\n// options, if given, can have the following properties:\r\n//   options.helpButton = { handler: yourEventHandler }\r\n//   options.strings = { italicexample: \"slanted text\" }\r\n// `yourEventHandler` is the click handler for the help button.\r\n// If `options.helpButton` isn't given, not help button is created.\r\n// `options.strings` can have any or all of the same properties as\r\n// `defaultStrings` above, so you can just override some string displayed\r\n// to the user on a case-by-case basis, or translate all strings to\r\n// a different language.\r\n//\r\n// For backwards compatibility reasons, the `options` argument can also\r\n// be just the `helpButton` object, and `strings.help` can also be set via\r\n// `helpButton.title`. This should be considered legacy.\r\n//\r\n// The constructed editor object has the methods:\r\n// - getConverter() returns the markdown converter object that was passed to the constructor\r\n// - run() actually starts the editor; should be called after all necessary plugins are registered. Calling this more than once is a no-op.\r\n// - refreshPreview() forces the preview to be updated. This method is only available after run() was called.\r\nexport function Pagedown(options) {\r\n\r\n\toptions = options || {};\r\n\r\n\tif (typeof options.handler === \"function\") { //backwards compatible behavior\r\n\t\toptions = {\r\n\t\t\thelpButton: options\r\n\t\t};\r\n\t}\r\n\toptions.strings = options.strings || {};\r\n\tvar getString = function(identifier) {\r\n\t\treturn options.strings[identifier] || defaultsStrings[identifier];\r\n\t};\r\n\r\n\tfunction identity(x) {\r\n\t\treturn x;\r\n\t}\r\n\r\n\tfunction returnFalse() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction HookCollection() {}\r\n\tHookCollection.prototype = {\r\n\r\n\t\tchain: function(hookname, func) {\r\n\t\t\tvar original = this[hookname];\r\n\t\t\tif (!original) {\r\n\t\t\t\tthrow new Error(\"unknown hook \" + hookname);\r\n\t\t\t}\r\n\r\n\t\t\tif (original === identity) {\r\n\t\t\t\tthis[hookname] = func;\r\n\t\t\t} else {\r\n\t\t\t\tthis[hookname] = function() {\r\n\t\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0);\r\n\t\t\t\t\targs[0] = original.apply(null, args);\r\n\t\t\t\t\treturn func.apply(null, args);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\tset: function(hookname, func) {\r\n\t\t\tif (!this[hookname]) {\r\n\t\t\t\tthrow new Error(\"unknown hook \" + hookname);\r\n\t\t\t}\r\n\t\t\tthis[hookname] = func;\r\n\t\t},\r\n\t\taddNoop: function(hookname) {\r\n\t\t\tthis[hookname] = identity;\r\n\t\t},\r\n\t\taddFalse: function(hookname) {\r\n\t\t\tthis[hookname] = returnFalse;\r\n\t\t}\r\n\t};\r\n\r\n\tvar hooks = this.hooks = new HookCollection();\r\n\thooks.addNoop(\"onPreviewRefresh\"); // called with no arguments after the preview has been refreshed\r\n\thooks.addNoop(\"postBlockquoteCreation\"); // called with the user's selection *after* the blockquote was created; should return the actual to-be-inserted text\r\n\thooks.addFalse(\"insertImageDialog\");\r\n\t/* called with one parameter: a callback to be called with the URL of the image. If the application creates\r\n\t * its own image insertion dialog, this hook should return true, and the callback should be called with the chosen\r\n\t * image url (or null if the user cancelled). If this hook returns false, the default dialog will be used.\r\n\t */\r\n\thooks.addFalse(\"insertLinkDialog\");\r\n\r\n\tvar that = this,\r\n\t\tinput;\r\n\r\n\tthis.run = function() {\r\n\t\tif (input)\r\n\t\t\treturn; // already initialized\r\n\r\n\t\tinput = options.input;\r\n\t\tvar commandManager = new CommandManager(hooks, getString);\r\n\t\tvar uiManager;\r\n\r\n\t\tuiManager = new UIManager(input, commandManager);\r\n\r\n\t\tthat.uiManager = uiManager;\r\n\t};\r\n\r\n}\r\n\r\n// before: contains all the text in the input box BEFORE the selection.\r\n// after: contains all the text in the input box AFTER the selection.\r\nfunction Chunks() {}\r\n\r\n// startRegex: a regular expression to find the start tag\r\n// endRegex: a regular expresssion to find the end tag\r\nChunks.prototype.findTags = function(startRegex, endRegex) {\r\n\r\n\tvar chunkObj = this;\r\n\tvar regex;\r\n\r\n\tif (startRegex) {\r\n\r\n\t\tregex = util.extendRegExp(startRegex, \"\", \"$\");\r\n\r\n\t\tthis.before = this.before.replace(regex,\r\n\t\t\tfunction(match) {\r\n\t\t\t\tchunkObj.startTag = chunkObj.startTag + match;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\r\n\t\tregex = util.extendRegExp(startRegex, \"^\", \"\");\r\n\r\n\t\tthis.selection = this.selection.replace(regex,\r\n\t\t\tfunction(match) {\r\n\t\t\t\tchunkObj.startTag = chunkObj.startTag + match;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\t}\r\n\r\n\tif (endRegex) {\r\n\r\n\t\tregex = util.extendRegExp(endRegex, \"\", \"$\");\r\n\r\n\t\tthis.selection = this.selection.replace(regex,\r\n\t\t\tfunction(match) {\r\n\t\t\t\tchunkObj.endTag = match + chunkObj.endTag;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\r\n\t\tregex = util.extendRegExp(endRegex, \"^\", \"\");\r\n\r\n\t\tthis.after = this.after.replace(regex,\r\n\t\t\tfunction(match) {\r\n\t\t\t\tchunkObj.endTag = match + chunkObj.endTag;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\n// If remove is false, the whitespace is transferred\r\n// to the before/after regions.\r\n//\r\n// If remove is true, the whitespace disappears.\r\nChunks.prototype.trimWhitespace = function(remove) {\r\n\tvar beforeReplacer, afterReplacer, that = this;\r\n\tif (remove) {\r\n\t\tbeforeReplacer = afterReplacer = \"\";\r\n\t} else {\r\n\t\tbeforeReplacer = function(s) {\r\n\t\t\tthat.before += s;\r\n\t\t\treturn \"\";\r\n\t\t};\r\n\t\tafterReplacer = function(s) {\r\n\t\t\tthat.after = s + that.after;\r\n\t\t\treturn \"\";\r\n\t\t};\r\n\t}\r\n\r\n\tthis.selection = this.selection.replace(/^(\\s*)/, beforeReplacer).replace(/(\\s*)$/, afterReplacer);\r\n};\r\n\r\n\r\nChunks.prototype.skipLines = function(nLinesBefore, nLinesAfter, findExtraNewlines) {\r\n\r\n\tif (nLinesBefore === undefined) {\r\n\t\tnLinesBefore = 1;\r\n\t}\r\n\r\n\tif (nLinesAfter === undefined) {\r\n\t\tnLinesAfter = 1;\r\n\t}\r\n\r\n\tnLinesBefore++;\r\n\tnLinesAfter++;\r\n\r\n\tvar regexText;\r\n\tvar replacementText;\r\n\r\n\t// chrome bug ... documented at: http://meta.stackoverflow.com/questions/63307/blockquote-glitch-in-editor-in-chrome-6-and-7/65985#65985\r\n\tif (navigator.userAgent.match(/Chrome/)) {\r\n\t\t\"X\".match(/()./);\r\n\t}\r\n\r\n\tthis.selection = this.selection.replace(/(^\\n*)/, \"\");\r\n\r\n\tthis.startTag = this.startTag + re.$1;\r\n\r\n\tthis.selection = this.selection.replace(/(\\n*$)/, \"\");\r\n\tthis.endTag = this.endTag + re.$1;\r\n\tthis.startTag = this.startTag.replace(/(^\\n*)/, \"\");\r\n\tthis.before = this.before + re.$1;\r\n\tthis.endTag = this.endTag.replace(/(\\n*$)/, \"\");\r\n\tthis.after = this.after + re.$1;\r\n\r\n\tif (this.before) {\r\n\r\n\t\tregexText = replacementText = \"\";\r\n\r\n\t\twhile (nLinesBefore--) {\r\n\t\t\tregexText += \"\\\\n?\";\r\n\t\t\treplacementText += \"\\n\";\r\n\t\t}\r\n\r\n\t\tif (findExtraNewlines) {\r\n\t\t\tregexText = \"\\\\n*\";\r\n\t\t}\r\n\t\tthis.before = this.before.replace(new re(regexText + \"$\", \"\"), replacementText);\r\n\t}\r\n\r\n\tif (this.after) {\r\n\r\n\t\tregexText = replacementText = \"\";\r\n\r\n\t\twhile (nLinesAfter--) {\r\n\t\t\tregexText += \"\\\\n?\";\r\n\t\t\treplacementText += \"\\n\";\r\n\t\t}\r\n\t\tif (findExtraNewlines) {\r\n\t\t\tregexText = \"\\\\n*\";\r\n\t\t}\r\n\r\n\t\tthis.after = this.after.replace(new re(regexText, \"\"), replacementText);\r\n\t}\r\n};\r\n\r\n// end of Chunks\r\n\r\n// Converts \\r\\n and \\r to \\n.\r\nutil.fixEolChars = function(text) {\r\n\ttext = text.replace(/\\r\\n/g, \"\\n\");\r\n\ttext = text.replace(/\\r/g, \"\\n\");\r\n\treturn text;\r\n};\r\n\r\n// Extends a regular expression.  Returns a new RegExp\r\n// using pre + regex + post as the expression.\r\n// Used in a few functions where we have a base\r\n// expression and we want to pre- or append some\r\n// conditions to it (e.g. adding \"$\" to the end).\r\n// The flags are unchanged.\r\n//\r\n// regex is a RegExp, pre and post are strings.\r\nutil.extendRegExp = function(regex, pre, post) {\r\n\r\n\tif (pre === null || pre === undefined) {\r\n\t\tpre = \"\";\r\n\t}\r\n\tif (post === null || post === undefined) {\r\n\t\tpost = \"\";\r\n\t}\r\n\r\n\tvar pattern = regex.toString();\r\n\tvar flags;\r\n\r\n\t// Replace the flags with empty space and store them.\r\n\tpattern = pattern.replace(/\\/([gim]*)$/, function(wholeMatch, flagsPart) {\r\n\t\tflags = flagsPart;\r\n\t\treturn \"\";\r\n\t});\r\n\r\n\t// Remove the slash delimiters on the regular expression.\r\n\tpattern = pattern.replace(/(^\\/|\\/$)/g, \"\");\r\n\tpattern = pre + pattern + post;\r\n\r\n\treturn new re(pattern, flags);\r\n};\r\n\r\n// The input textarea state/contents.\r\n// This is used to implement undo/redo by the undo manager.\r\nfunction TextareaState(input) {\r\n\r\n\t// Aliases\r\n\tvar stateObj = this;\r\n\tvar inputArea = input;\r\n\tthis.init = function() {\r\n\t\tthis.setInputAreaSelectionStartEnd();\r\n\t\tthis.text = inputArea.getContent();\r\n\t};\r\n\r\n\t// Sets the selected text in the input box after we've performed an\r\n\t// operation.\r\n\tthis.setInputAreaSelection = function() {\r\n\t\tinputArea.focus();\r\n\t\tinputArea.setSelection(stateObj.start, stateObj.end);\r\n\t};\r\n\r\n\tthis.setInputAreaSelectionStartEnd = function() {\r\n\t\tstateObj.start = Math.min(\r\n\t\t\tinputArea.selectionMgr.selectionStart,\r\n\t\t\tinputArea.selectionMgr.selectionEnd\r\n\t\t);\r\n\t\tstateObj.end = Math.max(\r\n\t\t\tinputArea.selectionMgr.selectionStart,\r\n\t\t\tinputArea.selectionMgr.selectionEnd\r\n\t\t);\r\n\t};\r\n\r\n\t// Restore this state into the input area.\r\n\tthis.restore = function() {\r\n\r\n\t\tif (stateObj.text !== undefined && stateObj.text != inputArea.getContent()) {\r\n\t\t\tinputArea.setContent(stateObj.text);\r\n\t\t}\r\n\t\tthis.setInputAreaSelection();\r\n\t};\r\n\r\n\t// Gets a collection of HTML chunks from the inptut textarea.\r\n\tthis.getChunks = function() {\r\n\r\n\t\tvar chunk = new Chunks();\r\n\t\tchunk.before = util.fixEolChars(stateObj.text.substring(0, stateObj.start));\r\n\t\tchunk.startTag = \"\";\r\n\t\tchunk.selection = util.fixEolChars(stateObj.text.substring(stateObj.start, stateObj.end));\r\n\t\tchunk.endTag = \"\";\r\n\t\tchunk.after = util.fixEolChars(stateObj.text.substring(stateObj.end));\r\n\r\n\t\treturn chunk;\r\n\t};\r\n\r\n\t// Sets the TextareaState properties given a chunk of markdown.\r\n\tthis.setChunks = function(chunk) {\r\n\r\n\t\tchunk.before = chunk.before + chunk.startTag;\r\n\t\tchunk.after = chunk.endTag + chunk.after;\r\n\r\n\t\tthis.start = chunk.before.length;\r\n\t\tthis.end = chunk.before.length + chunk.selection.length;\r\n\t\tthis.text = chunk.before + chunk.selection + chunk.after;\r\n\t};\r\n\tthis.init();\r\n}\r\n\r\nfunction UIManager(input, commandManager) {\r\n\r\n\tvar inputBox = input,\r\n\t\tbuttons = {}; // buttons.undo, buttons.link, etc. The actual DOM elements.\r\n\r\n\tmakeSpritedButtonRow();\r\n\r\n\t// Perform the button's action.\r\n\tfunction doClick(buttonName) {\r\n\t\tvar button = buttons[buttonName];\r\n\t\tif (!button) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinputBox.focus();\r\n\t\tvar linkOrImage = button === buttons.link || button.id === buttons.image;\r\n\r\n\t\tvar state = new TextareaState(input);\r\n\r\n\t\tif (!state) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar chunks = state.getChunks();\r\n\r\n\t\t// Some commands launch a \"modal\" prompt dialog.  Javascript\r\n\t\t// can't really make a modal dialog box and the WMD code\r\n\t\t// will continue to execute while the dialog is displayed.\r\n\t\t// This prevents the dialog pattern I'm used to and means\r\n\t\t// I can't do something like this:\r\n\t\t//\r\n\t\t// var link = CreateLinkDialog();\r\n\t\t// makeMarkdownLink(link);\r\n\t\t//\r\n\t\t// Instead of this straightforward method of handling a\r\n\t\t// dialog I have to pass any code which would execute\r\n\t\t// after the dialog is dismissed (e.g. link creation)\r\n\t\t// in a function parameter.\r\n\t\t//\r\n\t\t// Yes this is awkward and I think it sucks, but there's\r\n\t\t// no real workaround.  Only the image and link code\r\n\t\t// create dialogs and require the function pointers.\r\n\t\tvar fixupInputArea = function() {\r\n\r\n\t\t\tinputBox.focus();\r\n\r\n\t\t\tif (chunks) {\r\n\t\t\t\tstate.setChunks(chunks);\r\n\t\t\t}\r\n\r\n\t\t\tstate.restore();\r\n\t\t};\r\n\r\n\t\tvar noCleanup = button(chunks, fixupInputArea);\r\n\r\n\t\tif (!noCleanup) {\r\n\t\t\tfixupInputArea();\r\n\t\t\tif (!linkOrImage) {\r\n\t\t\t\tinputBox.adjustCursorPosition();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindCommand(method) {\r\n\t\tif (typeof method === \"string\")\r\n\t\t\tmethod = commandManager[method];\r\n\t\treturn function() {\r\n\t\t\tmethod.apply(commandManager, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction makeSpritedButtonRow() {\r\n\r\n\t\tbuttons.bold = bindCommand(\"doBold\");\r\n\t\tbuttons.italic = bindCommand(\"doItalic\");\r\n\t\tbuttons.link = bindCommand(function(chunk, postProcessing) {\r\n\t\t\treturn this.doLinkOrImage(chunk, postProcessing, false);\r\n\t\t});\r\n\t\tbuttons.quote = bindCommand(\"doBlockquote\");\r\n\t\tbuttons.code = bindCommand(\"doCode\");\r\n\t\tbuttons.image = bindCommand(function(chunk, postProcessing) {\r\n\t\t\treturn this.doLinkOrImage(chunk, postProcessing, true);\r\n\t\t});\r\n\t\tbuttons.olist = bindCommand(function(chunk, postProcessing) {\r\n\t\t\tthis.doList(chunk, postProcessing, true);\r\n\t\t});\r\n\t\tbuttons.ulist = bindCommand(function(chunk, postProcessing) {\r\n\t\t\tthis.doList(chunk, postProcessing, false);\r\n\t\t});\r\n\t\tbuttons.heading = bindCommand(\"doHeading\");\r\n\t\tbuttons.hr = bindCommand(\"doHorizontalRule\");\r\n\t\tbuttons.table = bindCommand(\"doTable\");\r\n\t}\r\n\r\n\tthis.doClick = doClick;\r\n\r\n}\r\n\r\nfunction CommandManager(pluginHooks, getString) {\r\n\tthis.hooks = pluginHooks;\r\n\tthis.getString = getString;\r\n}\r\n\r\nvar commandProto = CommandManager.prototype;\r\n\r\n// The markdown symbols - 4 spaces = code, > = blockquote, etc.\r\ncommandProto.prefixes = \"(?:\\\\s{4,}|\\\\s*>|\\\\s*-\\\\s+|\\\\s*\\\\d+\\\\.|=|\\\\+|-|_|\\\\*|#|\\\\s*\\\\[[^\\n]]+\\\\]:)\";\r\n\r\n// Remove markdown symbols from the chunk selection.\r\ncommandProto.unwrap = function(chunk) {\r\n\tvar txt = new re(\"([^\\\\n])\\\\n(?!(\\\\n|\" + this.prefixes + \"))\", \"g\");\r\n\tchunk.selection = chunk.selection.replace(txt, \"$1 $2\");\r\n};\r\n\r\ncommandProto.wrap = function(chunk, len) {\r\n\tthis.unwrap(chunk);\r\n\tvar regex = new re(\"(.{1,\" + len + \"})( +|$\\\\n?)\", \"gm\"),\r\n\t\tthat = this;\r\n\r\n\tchunk.selection = chunk.selection.replace(regex, function(line, marked) {\r\n\t\tif (new re(\"^\" + that.prefixes, \"\").test(line)) {\r\n\t\t\treturn line;\r\n\t\t}\r\n\t\treturn marked + \"\\n\";\r\n\t});\r\n\r\n\tchunk.selection = chunk.selection.replace(/\\s+$/, \"\");\r\n};\r\n\r\ncommandProto.doBold = function(chunk, postProcessing) {\r\n\treturn this.doBorI(chunk, postProcessing, 2, this.getString(\"boldexample\"));\r\n};\r\n\r\ncommandProto.doItalic = function(chunk, postProcessing) {\r\n\treturn this.doBorI(chunk, postProcessing, 1, this.getString(\"italicexample\"));\r\n};\r\n\r\n// chunk: The selected region that will be enclosed with */**\r\n// nStars: 1 for italics, 2 for bold\r\n// insertText: If you just click the button without highlighting text, this gets inserted\r\ncommandProto.doBorI = function(chunk, postProcessing, nStars, insertText) {\r\n\r\n\t// Get rid of whitespace and fixup newlines.\r\n\tchunk.trimWhitespace();\r\n\tchunk.selection = chunk.selection.replace(/\\n{2,}/g, \"\\n\");\r\n\r\n\t// Look for stars before and after.  Is the chunk already marked up?\r\n\t// note that these regex matches cannot fail\r\n\tvar starsBefore = /(\\**$)/.exec(chunk.before)[0];\r\n\tvar starsAfter = /(^\\**)/.exec(chunk.after)[0];\r\n\r\n\tvar prevStars = Math.min(starsBefore.length, starsAfter.length);\r\n\r\n\t// Remove stars if we have to since the button acts as a toggle.\r\n\tif ((prevStars >= nStars) && (prevStars != 2 || nStars != 1)) {\r\n\t\tchunk.before = chunk.before.replace(re(\"[*]{\" + nStars + \"}$\", \"\"), \"\");\r\n\t\tchunk.after = chunk.after.replace(re(\"^[*]{\" + nStars + \"}\", \"\"), \"\");\r\n\t} else if (!chunk.selection && starsAfter) {\r\n\t\t// It's not really clear why this code is necessary.  It just moves\r\n\t\t// some arbitrary stuff around.\r\n\t\tchunk.after = chunk.after.replace(/^([*_]*)/, \"\");\r\n\t\tchunk.before = chunk.before.replace(/(\\s?)$/, \"\");\r\n\t\tvar whitespace = re.$1;\r\n\t\tchunk.before = chunk.before + starsAfter + whitespace;\r\n\t} else {\r\n\r\n\t\t// In most cases, if you don't have any selected text and click the button\r\n\t\t// you'll get a selected, marked up region with the default text inserted.\r\n\t\tif (!chunk.selection && !starsAfter) {\r\n\t\t\tchunk.selection = insertText;\r\n\t\t}\r\n\r\n\t\t// Add the true markup.\r\n\t\tvar markup = nStars <= 1 ? \"*\" : \"**\"; // shouldn't the test be = ?\r\n\t\tchunk.before = chunk.before + markup;\r\n\t\tchunk.after = markup + chunk.after;\r\n\t}\r\n\r\n\treturn;\r\n};\r\n\r\ncommandProto.stripLinkDefs = function(text, defsToAdd) {\r\n\r\n\ttext = text.replace(/^[ ]{0,3}\\[(\\d+)\\]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"(](.+?)[\")][ \\t]*)?(?:\\n+|$)/gm,\r\n\t\tfunction(totalMatch, id, link, newlines, title) {\r\n\t\t\tdefsToAdd[id] = totalMatch.replace(/\\s*$/, \"\");\r\n\t\t\tif (newlines) {\r\n\t\t\t\t// Strip the title and return that separately.\r\n\t\t\t\tdefsToAdd[id] = totalMatch.replace(/[\"(](.+?)[\")]$/, \"\");\r\n\t\t\t\treturn newlines + title;\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t});\r\n\r\n\treturn text;\r\n};\r\n\r\ncommandProto.addLinkDef = function(chunk, linkDef) {\r\n\r\n\tvar refNumber = 0; // The current reference number\r\n\tvar defsToAdd = {}; //\r\n\t// Start with a clean slate by removing all previous link definitions.\r\n\tchunk.before = this.stripLinkDefs(chunk.before, defsToAdd);\r\n\tchunk.selection = this.stripLinkDefs(chunk.selection, defsToAdd);\r\n\tchunk.after = this.stripLinkDefs(chunk.after, defsToAdd);\r\n\r\n\tvar defs = \"\";\r\n\tvar regex = /(\\[)((?:\\[[^\\]]*\\]|[^\\[\\]])*)(\\][ ]?(?:\\n[ ]*)?\\[)(\\d+)(\\])/g;\r\n\r\n\tvar addDefNumber = function(def) {\r\n\t\trefNumber++;\r\n\t\tdef = def.replace(/^[ ]{0,3}\\[(\\d+)\\]:/, \"  [\" + refNumber + \"]:\");\r\n\t\tdefs += \"\\n\" + def;\r\n\t};\r\n\r\n\t// note that\r\n\t// a) the recursive call to getLink cannot go infinite, because by definition\r\n\t//    of regex, inner is always a proper substring of wholeMatch, and\r\n\t// b) more than one level of nesting is neither supported by the regex\r\n\t//    nor making a lot of sense (the only use case for nesting is a linked image)\r\n\tvar getLink = function(wholeMatch, before, inner, afterInner, id, end) {\r\n\t\tinner = inner.replace(regex, getLink);\r\n\t\tif (defsToAdd[id]) {\r\n\t\t\taddDefNumber(defsToAdd[id]);\r\n\t\t\treturn before + inner + afterInner + refNumber + end;\r\n\t\t}\r\n\t\treturn wholeMatch;\r\n\t};\r\n\r\n\tchunk.before = chunk.before.replace(regex, getLink);\r\n\r\n\tif (linkDef) {\r\n\t\taddDefNumber(linkDef);\r\n\t} else {\r\n\t\tchunk.selection = chunk.selection.replace(regex, getLink);\r\n\t}\r\n\r\n\tvar refOut = refNumber;\r\n\r\n\tchunk.after = chunk.after.replace(regex, getLink);\r\n\r\n\tif (chunk.after) {\r\n\t\tchunk.after = chunk.after.replace(/\\n*$/, \"\");\r\n\t}\r\n\tif (!chunk.after) {\r\n\t\tchunk.selection = chunk.selection.replace(/\\n*$/, \"\");\r\n\t}\r\n\r\n\tchunk.after += \"\\n\\n\" + defs;\r\n\r\n\treturn refOut;\r\n};\r\n\r\n// takes the line as entered into the add link/as image dialog and makes\r\n// sure the URL and the optinal title are \"nice\".\r\nfunction properlyEncoded(linkdef) {\r\n\treturn linkdef.replace(/^\\s*(.*?)(?:\\s+\"(.+)\")?\\s*$/, function(wholematch, link, title) {\r\n\t\tlink = link.replace(/\\?.*$/, function(querypart) {\r\n\t\t\treturn querypart.replace(/\\+/g, \" \"); // in the query string, a plus and a space are identical\r\n\t\t});\r\n\t\tlink = decodeURIComponent(link); // unencode first, to prevent double encoding\r\n\t\tlink = encodeURI(link).replace(/'/g, '%27').replace(/\\(/g, '%28').replace(/\\)/g, '%29');\r\n\t\tlink = link.replace(/\\?.*$/, function(querypart) {\r\n\t\t\treturn querypart.replace(/\\+/g, \"%2b\"); // since we replaced plus with spaces in the query part, all pluses that now appear where originally encoded\r\n\t\t});\r\n\t\tif (title) {\r\n\t\t\ttitle = title.trim ? title.trim() : title.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\r\n\t\t\ttitle = title.replace(/\"/g, \"quot;\").replace(/\\(/g, \"&#40;\").replace(/\\)/g, \"&#41;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t\t}\r\n\t\treturn title ? link + ' \"' + title + '\"' : link;\r\n\t});\r\n}\r\n\r\ncommandProto.doLinkOrImage = function(chunk, postProcessing, isImage) {\r\n\r\n\tchunk.trimWhitespace();\r\n\t//chunk.findTags(/\\s*!?\\[/, /\\][ ]?(?:\\n[ ]*)?(\\[.*?\\])?/);\r\n\tchunk.findTags(/\\s*!?\\[/, /\\][ ]?(?:\\n[ ]*)?(\\(.*?\\))?/);\r\n\r\n\tif (chunk.endTag.length > 1 && chunk.startTag.length > 0) {\r\n\r\n\t\tchunk.startTag = chunk.startTag.replace(/!?\\[/, \"\");\r\n\t\tchunk.endTag = \"\";\r\n\t\tthis.addLinkDef(chunk, null);\r\n\r\n\t} else {\r\n\r\n\t\t// We're moving start and end tag back into the selection, since (as we're in the else block) we're not\r\n\t\t// *removing* a link, but *adding* one, so whatever findTags() found is now back to being part of the\r\n\t\t// link text. linkEnteredCallback takes care of escaping any brackets.\r\n\t\tchunk.selection = chunk.startTag + chunk.selection + chunk.endTag;\r\n\t\tchunk.startTag = chunk.endTag = \"\";\r\n\r\n\t\tif (/\\n\\n/.test(chunk.selection)) {\r\n\t\t\tthis.addLinkDef(chunk, null);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar that = this;\r\n\t\t// The function to be executed when you enter a link and press OK or Cancel.\r\n\t\t// Marks up the link and adds the ref.\r\n\t\tvar linkEnteredCallback = function(link) {\r\n\r\n\t\t\tif (link !== null) {\r\n\t\t\t\t// (                          $1\r\n\t\t\t\t//     [^\\\\]                  anything that's not a backslash\r\n\t\t\t\t//     (?:\\\\\\\\)*              an even number (this includes zero) of backslashes\r\n\t\t\t\t// )\r\n\t\t\t\t// (?=                        followed by\r\n\t\t\t\t//     [[\\]]                  an opening or closing bracket\r\n\t\t\t\t// )\r\n\t\t\t\t//\r\n\t\t\t\t// In other words, a non-escaped bracket. These have to be escaped now to make sure they\r\n\t\t\t\t// don't count as the end of the link or similar.\r\n\t\t\t\t// Note that the actual bracket has to be a lookahead, because (in case of to subsequent brackets),\r\n\t\t\t\t// the bracket in one match may be the \"not a backslash\" character in the next match, so it\r\n\t\t\t\t// should not be consumed by the first match.\r\n\t\t\t\t// The \"prepend a space and finally remove it\" steps makes sure there is a \"not a backslash\" at the\r\n\t\t\t\t// start of the string, so this also works if the selection begins with a bracket. We cannot solve\r\n\t\t\t\t// this by anchoring with ^, because in the case that the selection starts with two brackets, this\r\n\t\t\t\t// would mean a zero-width match at the start. Since zero-width matches advance the string position,\r\n\t\t\t\t// the first bracket could then not act as the \"not a backslash\" for the second.\r\n\t\t\t\tchunk.selection = (\" \" + chunk.selection).replace(/([^\\\\](?:\\\\\\\\)*)(?=[[\\]])/g, \"$1\\\\\").substr(1);\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tvar linkDef = \" [999]: \" + properlyEncoded(link);\r\n\r\n\t\t\t\tvar num = that.addLinkDef(chunk, linkDef);\r\n\t\t\t\t*/\r\n\t\t\t\tchunk.startTag = isImage ? \"![\" : \"[\";\r\n\t\t\t\t//chunk.endTag = \"][\" + num + \"]\";\r\n\t\t\t\tchunk.endTag = \"](\" + properlyEncoded(link) + \")\";\r\n\r\n\t\t\t\tif (!chunk.selection) {\r\n\t\t\t\t\tif (isImage) {\r\n\t\t\t\t\t\tchunk.selection = that.getString(\"imagedescription\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tchunk.selection = that.getString(\"linkdescription\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpostProcessing();\r\n\t\t};\r\n\r\n\t\tif (isImage) {\r\n\t\t\tthis.hooks.insertImageDialog(linkEnteredCallback);\r\n\t\t} else {\r\n\t\t\tthis.hooks.insertLinkDialog(linkEnteredCallback);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\n// When making a list, hitting shift-enter will put your cursor on the next line\r\n// at the current indent level.\r\ncommandProto.doAutoindent = function(chunk) {\r\n\r\n\tvar commandMgr = this,\r\n\t\tfakeSelection = false;\r\n\r\n\tchunk.before = chunk.before.replace(/(\\n|^)[ ]{0,3}([*+-]|\\d+[.])[ \\t]*\\n$/, \"\\n\\n\");\r\n\tchunk.before = chunk.before.replace(/(\\n|^)[ ]{0,3}>[ \\t]*\\n$/, \"\\n\\n\");\r\n\tchunk.before = chunk.before.replace(/(\\n|^)[ \\t]+\\n$/, \"\\n\\n\");\r\n\r\n\t// There's no selection, end the cursor wasn't at the end of the line:\r\n\t// The user wants to split the current list item / code line / blockquote line\r\n\t// (for the latter it doesn't really matter) in two. Temporarily select the\r\n\t// (rest of the) line to achieve this.\r\n\tif (!chunk.selection && !/^[ \\t]*(?:\\n|$)/.test(chunk.after)) {\r\n\t\tchunk.after = chunk.after.replace(/^[^\\n]*/, function(wholeMatch) {\r\n\t\t\tchunk.selection = wholeMatch;\r\n\t\t\treturn \"\";\r\n\t\t});\r\n\t\tfakeSelection = true;\r\n\t}\r\n\r\n\tif (/(\\n|^)[ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*\\n$/.test(chunk.before)) {\r\n\t\tif (commandMgr.doList) {\r\n\t\t\tcommandMgr.doList(chunk);\r\n\t\t}\r\n\t}\r\n\tif (/(\\n|^)[ ]{0,3}>[ \\t]+.*\\n$/.test(chunk.before)) {\r\n\t\tif (commandMgr.doBlockquote) {\r\n\t\t\tcommandMgr.doBlockquote(chunk);\r\n\t\t}\r\n\t}\r\n\tif (/(\\n|^)(\\t|[ ]{4,}).*\\n$/.test(chunk.before)) {\r\n\t\tif (commandMgr.doCode) {\r\n\t\t\tcommandMgr.doCode(chunk);\r\n\t\t}\r\n\t}\r\n\r\n\tif (fakeSelection) {\r\n\t\tchunk.after = chunk.selection + chunk.after;\r\n\t\tchunk.selection = \"\";\r\n\t}\r\n};\r\n\r\ncommandProto.doBlockquote = function(chunk) {\r\n\r\n\tchunk.selection = chunk.selection.replace(/^(\\n*)([^\\r]+?)(\\n*)$/,\r\n\t\tfunction(totalMatch, newlinesBefore, text, newlinesAfter) {\r\n\t\t\tchunk.before += newlinesBefore;\r\n\t\t\tchunk.after = newlinesAfter + chunk.after;\r\n\t\t\treturn text;\r\n\t\t});\r\n\r\n\tchunk.before = chunk.before.replace(/(>[ \\t]*)$/,\r\n\t\tfunction(totalMatch, blankLine) {\r\n\t\t\tchunk.selection = blankLine + chunk.selection;\r\n\t\t\treturn \"\";\r\n\t\t});\r\n\r\n\tchunk.selection = chunk.selection.replace(/^(\\s|>)+$/, \"\");\r\n\tchunk.selection = chunk.selection || this.getString(\"quoteexample\");\r\n\r\n\t// The original code uses a regular expression to find out how much of the\r\n\t// text *directly before* the selection already was a blockquote:\r\n\r\n\t/*\r\n\tif (chunk.before) {\r\n\tchunk.before = chunk.before.replace(/\\n?$/, \"\\n\");\r\n\t}\r\n\tchunk.before = chunk.before.replace(/(((\\n|^)(\\n[ \\t]*)*>(.+\\n)*.*)+(\\n[ \\t]*)*$)/,\r\n\tfunction (totalMatch) {\r\n\tchunk.startTag = totalMatch;\r\n\treturn \"\";\r\n\t});\r\n\t*/\r\n\r\n\t// This comes down to:\r\n\t// Go backwards as many lines a possible, such that each line\r\n\t//  a) starts with \">\", or\r\n\t//  b) is almost empty, except for whitespace, or\r\n\t//  c) is preceeded by an unbroken chain of non-empty lines\r\n\t//     leading up to a line that starts with \">\" and at least one more character\r\n\t// and in addition\r\n\t//  d) at least one line fulfills a)\r\n\t//\r\n\t// Since this is essentially a backwards-moving regex, it's susceptible to\r\n\t// catstrophic backtracking and can cause the browser to hang;\r\n\t// see e.g. http://meta.stackoverflow.com/questions/9807.\r\n\t//\r\n\t// Hence we replaced this by a simple state machine that just goes through the\r\n\t// lines and checks for a), b), and c).\r\n\r\n\tvar match = \"\",\r\n\t\tleftOver = \"\",\r\n\t\tline;\r\n\tif (chunk.before) {\r\n\t\tvar lines = chunk.before.replace(/\\n$/, \"\").split(\"\\n\");\r\n\t\tvar inChain = false;\r\n\t\tfor (var i = 0; i < lines.length; i++) {\r\n\t\t\tvar good = false;\r\n\t\t\tline = lines[i];\r\n\t\t\tinChain = inChain && line.length > 0; // c) any non-empty line continues the chain\r\n\t\t\tif (/^>/.test(line)) { // a)\r\n\t\t\t\tgood = true;\r\n\t\t\t\tif (!inChain && line.length > 1) // c) any line that starts with \">\" and has at least one more character starts the chain\r\n\t\t\t\t\tinChain = true;\r\n\t\t\t} else if (/^[ \\t]*$/.test(line)) { // b)\r\n\t\t\t\tgood = true;\r\n\t\t\t} else {\r\n\t\t\t\tgood = inChain; // c) the line is not empty and does not start with \">\", so it matches if and only if we're in the chain\r\n\t\t\t}\r\n\t\t\tif (good) {\r\n\t\t\t\tmatch += line + \"\\n\";\r\n\t\t\t} else {\r\n\t\t\t\tleftOver += match + line;\r\n\t\t\t\tmatch = \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!/(^|\\n)>/.test(match)) { // d)\r\n\t\t\tleftOver += match;\r\n\t\t\tmatch = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tchunk.startTag = match;\r\n\tchunk.before = leftOver;\r\n\r\n\t// end of change\r\n\r\n\tif (chunk.after) {\r\n\t\tchunk.after = chunk.after.replace(/^\\n?/, \"\\n\");\r\n\t}\r\n\r\n\tchunk.after = chunk.after.replace(/^(((\\n|^)(\\n[ \\t]*)*>(.+\\n)*.*)+(\\n[ \\t]*)*)/,\r\n\t\tfunction(totalMatch) {\r\n\t\t\tchunk.endTag = totalMatch;\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t);\r\n\r\n\tvar replaceBlanksInTags = function(useBracket) {\r\n\r\n\t\tvar replacement = useBracket ? \"> \" : \"\";\r\n\r\n\t\tif (chunk.startTag) {\r\n\t\t\tchunk.startTag = chunk.startTag.replace(/\\n((>|\\s)*)\\n$/,\r\n\t\t\t\tfunction(totalMatch, markdown) {\r\n\t\t\t\t\treturn \"\\n\" + markdown.replace(/^[ ]{0,3}>?[ \\t]*$/gm, replacement) + \"\\n\";\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tif (chunk.endTag) {\r\n\t\t\tchunk.endTag = chunk.endTag.replace(/^\\n((>|\\s)*)\\n/,\r\n\t\t\t\tfunction(totalMatch, markdown) {\r\n\t\t\t\t\treturn \"\\n\" + markdown.replace(/^[ ]{0,3}>?[ \\t]*$/gm, replacement) + \"\\n\";\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tif (/^(?![ ]{0,3}>)/m.test(chunk.selection)) {\r\n\t\tthis.wrap(chunk, SETTINGS.lineLength - 2);\r\n\t\tchunk.selection = chunk.selection.replace(/^/gm, \"> \");\r\n\t\treplaceBlanksInTags(true);\r\n\t\tchunk.skipLines();\r\n\t} else {\r\n\t\tchunk.selection = chunk.selection.replace(/^[ ]{0,3}> ?/gm, \"\");\r\n\t\tthis.unwrap(chunk);\r\n\t\treplaceBlanksInTags(false);\r\n\r\n\t\tif (!/^(\\n|^)[ ]{0,3}>/.test(chunk.selection) && chunk.startTag) {\r\n\t\t\tchunk.startTag = chunk.startTag.replace(/\\n{0,2}$/, \"\\n\\n\");\r\n\t\t}\r\n\r\n\t\tif (!/(\\n|^)[ ]{0,3}>.*$/.test(chunk.selection) && chunk.endTag) {\r\n\t\t\tchunk.endTag = chunk.endTag.replace(/^\\n{0,2}/, \"\\n\\n\");\r\n\t\t}\r\n\t}\r\n\r\n\tchunk.selection = this.hooks.postBlockquoteCreation(chunk.selection);\r\n\r\n\tif (!/\\n/.test(chunk.selection)) {\r\n\t\tchunk.selection = chunk.selection.replace(/^(> *)/,\r\n\t\t\tfunction(wholeMatch, blanks) {\r\n\t\t\t\tchunk.startTag += blanks;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\ncommandProto.doCode = function(chunk) {\r\n\r\n\tvar hasTextBefore = /\\S[ ]*$/.test(chunk.before);\r\n\tvar hasTextAfter = /^[ ]*\\S/.test(chunk.after);\r\n\r\n\t// Use 'four space' markdown if the selection is on its own\r\n\t// line or is multiline.\r\n\tif ((!hasTextAfter && !hasTextBefore) || /\\n/.test(chunk.selection)) {\r\n\r\n\t\tchunk.before = chunk.before.replace(/[ ]{4}$/,\r\n\t\t\tfunction(totalMatch) {\r\n\t\t\t\tchunk.selection = totalMatch + chunk.selection;\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\r\n\t\tvar nLinesBack = 1;\r\n\t\tvar nLinesForward = 1;\r\n\r\n\t\tif (/(\\n|^)(\\t|[ ]{4,}).*\\n$/.test(chunk.before)) {\r\n\t\t\tnLinesBack = 0;\r\n\t\t}\r\n\t\tif (/^\\n(\\t|[ ]{4,})/.test(chunk.after)) {\r\n\t\t\tnLinesForward = 0;\r\n\t\t}\r\n\r\n\t\tchunk.skipLines(nLinesBack, nLinesForward);\r\n\r\n\t\tif (!chunk.selection) {\r\n\t\t\tchunk.startTag = \"    \";\r\n\t\t\tchunk.selection = this.getString(\"codeexample\");\r\n\t\t} else {\r\n\t\t\tif (/^[ ]{0,3}\\S/m.test(chunk.selection)) {\r\n\t\t\t\tif (/\\n/.test(chunk.selection))\r\n\t\t\t\t\tchunk.selection = chunk.selection.replace(/^/gm, \"    \");\r\n\t\t\t\telse // if it's not multiline, do not select the four added spaces; this is more consistent with the doList behavior\r\n\t\t\t\t\tchunk.before += \"    \";\r\n\t\t\t} else {\r\n\t\t\t\tchunk.selection = chunk.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\\t)/gm, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t// Use backticks (`) to delimit the code block.\r\n\r\n\t\tchunk.trimWhitespace();\r\n\t\tchunk.findTags(/`/, /`/);\r\n\r\n\t\tif (!chunk.startTag && !chunk.endTag) {\r\n\t\t\tchunk.startTag = chunk.endTag = \"`\";\r\n\t\t\tif (!chunk.selection) {\r\n\t\t\t\tchunk.selection = this.getString(\"codeexample\");\r\n\t\t\t}\r\n\t\t} else if (chunk.endTag && !chunk.startTag) {\r\n\t\t\tchunk.before += chunk.endTag;\r\n\t\t\tchunk.endTag = \"\";\r\n\t\t} else {\r\n\t\t\tchunk.startTag = chunk.endTag = \"\";\r\n\t\t}\r\n\t}\r\n};\r\n\r\ncommandProto.doList = function(chunk, postProcessing, isNumberedList) {\r\n\r\n\t// These are identical except at the very beginning and end.\r\n\t// Should probably use the regex extension function to make this clearer.\r\n\tvar previousItemsRegex = /(\\n|^)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*)(\\n.+|\\n{2,}([*+-].*|\\d+[.])[ \\t]+.*|\\n{2,}[ \\t]+\\S.*)*)\\n*$/;\r\n\tvar nextItemsRegex = /^\\n*(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*)(\\n.+|\\n{2,}([*+-].*|\\d+[.])[ \\t]+.*|\\n{2,}[ \\t]+\\S.*)*)\\n*/;\r\n\r\n\t// The default bullet is a dash but others are possible.\r\n\t// This has nothing to do with the particular HTML bullet,\r\n\t// it's just a markdown bullet.\r\n\tvar bullet = \"-\";\r\n\r\n\t// The number in a numbered list.\r\n\tvar num = 1;\r\n\r\n\t// Get the item prefix - e.g. \" 1. \" for a numbered list, \" - \" for a bulleted list.\r\n\tvar getItemPrefix = function() {\r\n\t\tvar prefix;\r\n\t\tif (isNumberedList) {\r\n\t\t\tprefix = \" \" + num + \". \";\r\n\t\t\tnum++;\r\n\t\t} else {\r\n\t\t\tprefix = \" \" + bullet + \" \";\r\n\t\t}\r\n\t\treturn prefix;\r\n\t};\r\n\r\n\t// Fixes the prefixes of the other list items.\r\n\tvar getPrefixedItem = function(itemText) {\r\n\r\n\t\t// The numbering flag is unset when called by autoindent.\r\n\t\tif (isNumberedList === undefined) {\r\n\t\t\tisNumberedList = /^\\s*\\d/.test(itemText);\r\n\t\t}\r\n\r\n\t\t// Renumber/bullet the list element.\r\n\t\titemText = itemText.replace(/^[ ]{0,3}([*+-]|\\d+[.])\\s/gm,\r\n\t\t\tfunction() {\r\n\t\t\t\treturn getItemPrefix();\r\n\t\t\t});\r\n\r\n\t\treturn itemText;\r\n\t};\r\n\r\n\tchunk.findTags(/(\\n|^)*[ ]{0,3}([*+-]|\\d+[.])\\s+/, null);\r\n\r\n\tif (chunk.before && !/\\n$/.test(chunk.before) && !/^\\n/.test(chunk.startTag)) {\r\n\t\tchunk.before += chunk.startTag;\r\n\t\tchunk.startTag = \"\";\r\n\t}\r\n\r\n\tif (chunk.startTag) {\r\n\r\n\t\tvar hasDigits = /\\d+[.]/.test(chunk.startTag);\r\n\t\tchunk.startTag = \"\";\r\n\t\tchunk.selection = chunk.selection.replace(/\\n[ ]{4}/g, \"\\n\");\r\n\t\tthis.unwrap(chunk);\r\n\t\tchunk.skipLines();\r\n\r\n\t\tif (hasDigits) {\r\n\t\t\t// Have to renumber the bullet points if this is a numbered list.\r\n\t\t\tchunk.after = chunk.after.replace(nextItemsRegex, getPrefixedItem);\r\n\t\t}\r\n\t\tif (isNumberedList == hasDigits) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tvar nLinesUp = 1;\r\n\r\n\tchunk.before = chunk.before.replace(previousItemsRegex,\r\n\t\tfunction(itemText) {\r\n\t\t\tif (/^\\s*([*+-])/.test(itemText)) {\r\n\t\t\t\tbullet = re.$1;\r\n\t\t\t}\r\n\t\t\tnLinesUp = /[^\\n]\\n\\n[^\\n]/.test(itemText) ? 1 : 0;\r\n\t\t\treturn getPrefixedItem(itemText);\r\n\t\t});\r\n\r\n\tif (!chunk.selection) {\r\n\t\tchunk.selection = this.getString(\"litem\");\r\n\t}\r\n\r\n\tvar prefix = getItemPrefix();\r\n\r\n\tvar nLinesDown = 1;\r\n\r\n\tchunk.after = chunk.after.replace(nextItemsRegex,\r\n\t\tfunction(itemText) {\r\n\t\t\tnLinesDown = /[^\\n]\\n\\n[^\\n]/.test(itemText) ? 1 : 0;\r\n\t\t\treturn getPrefixedItem(itemText);\r\n\t\t});\r\n\r\n\tchunk.trimWhitespace(true);\r\n\tchunk.skipLines(nLinesUp, nLinesDown, true);\r\n\tchunk.startTag = prefix;\r\n\tvar spaces = prefix.replace(/./g, \" \");\r\n\tthis.wrap(chunk, SETTINGS.lineLength - spaces.length);\r\n\tchunk.selection = chunk.selection.replace(/\\n/g, \"\\n\" + spaces);\r\n\r\n};\r\n\r\ncommandProto.doTable = function(chunk) {\r\n\t// Credit: https://github.com/fcrespo82/atom-markdown-table-formatter\r\n\r\n\tvar keepFirstAndLastPipes = true,\r\n\t\t/*\r\n\t\t\t\t\t( # header capture\r\n\t\t\t\t\t  (?:\r\n\t\t\t\t\t\t(?:[^\\n]*?\\|[^\\n]*)       # line w/ at least one pipe\r\n\t\t\t\t\t\t\\ *                       # maybe trailing whitespace\r\n\t\t\t\t\t  )?                          # maybe header\r\n\t\t\t\t\t  (?:\\n|^)                    # newline\r\n\t\t\t\t\t)\r\n\t\t\t\t\t( # format capture\r\n\t\t\t\t\t  (?:\r\n\t\t\t\t\t\t\\|\\ *:?-+:?\\ *            # format starting w/pipe\r\n\t\t\t\t\t\t|\\|?(?:\\ *:?-+:?\\ *\\|)+   # or separated by pipe\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t  (?:\\ *:?-+:?\\ *)?           # maybe w/o trailing pipe\r\n\t\t\t\t\t  \\ *                         # maybe trailing whitespace\r\n\t\t\t\t\t  \\n                          # newline\r\n\t\t\t\t\t)\r\n\t\t\t\t\t( # body capture\r\n\t\t\t\t\t  (?:\r\n\t\t\t\t\t\t(?:[^\\n]*?\\|[^\\n]*)       # line w/ at least one pipe\r\n\t\t\t\t\t\t\\ *                       # maybe trailing whitespace\r\n\t\t\t\t\t\t(?:\\n|$)                  # newline\r\n\t\t\t\t\t  )+ # at least one\r\n\t\t\t\t\t)\r\n\t\t\t*/\r\n\t\tregex = /((?:(?:[^\\n]*?\\|[^\\n]*) *)?(?:\\r?\\n|^))((?:\\| *:?-+:? *|\\|?(?: *:?-+:? *\\|)+)(?: *:?-+:? *)? *\\r?\\n)((?:(?:[^\\n]*?\\|[^\\n]*) *(?:\\r?\\n|$))+)/;\r\n\r\n\r\n\tfunction padding(len, str) {\r\n\t\tvar result = '';\r\n\t\tstr = str || ' ';\r\n\t\tlen = Math.floor(len);\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tresult += str;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction stripTailPipes(str) {\r\n\t\treturn str.trim().replace(/(^\\||\\|$)/g, \"\");\r\n\t}\r\n\r\n\tfunction splitCells(str) {\r\n\t\treturn str.split('|');\r\n\t}\r\n\r\n\tfunction addTailPipes(str) {\r\n\t\tif (keepFirstAndLastPipes) {\r\n\t\t\treturn \"|\" + str + \"|\";\r\n\t\t} else {\r\n\t\t\treturn str;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction joinCells(arr) {\r\n\t\treturn arr.join('|');\r\n\t}\r\n\r\n\tfunction formatTable(text, appendNewline) {\r\n\t\tvar i, j, len1, ref1, ref2, ref3, k, len2, results, formatline, headerline, just, formatrow, data, line, lines, justify, cell, cells, first, last, ends, columns, content, widths, formatted, front, back;\r\n\t\tformatline = text[2].trim();\r\n\t\theaderline = text[1].trim();\r\n\t\tref1 = headerline.length === 0 ? [0, text[3]] : [1, text[1] + text[3]], formatrow = ref1[0], data = ref1[1];\r\n\t\tlines = data.trim().split('\\n');\r\n\t\tjustify = [];\r\n\t\tref2 = splitCells(stripTailPipes(formatline));\r\n\t\tfor (j = 0, len1 = ref2.length; j < len1; j++) {\r\n\t\t\tcell = ref2[j];\r\n\t\t\tref3 = cell.trim(), first = ref3[0], last = ref3[ref3.length - 1];\r\n\t\t\tswitch ((ends = (first ? first : ':') + (last ? last : ''))) {\r\n\t\t\t\tcase '::':\r\n\t\t\t\tcase '-:':\r\n\t\t\t\tcase ':-':\r\n\t\t\t\t\tjustify.push(ends);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tjustify.push('--');\r\n\t\t\t}\r\n\t\t}\r\n\t\tcolumns = justify.length;\r\n\t\tcontent = [];\r\n\t\tfor (j = 0, len1 = lines.length; j < len1; j++) {\r\n\t\t\tline = lines[j];\r\n\t\t\tcells = splitCells(stripTailPipes(line));\r\n\t\t\tcells[columns - 1] = joinCells(cells.slice(columns - 1));\r\n\t\t\tresults = [];\r\n\t\t\tfor (k = 0, len2 = cells.length; k < len2; k++) {\r\n\t\t\t\tcell = cells[k];\r\n\t\t\t\tresults.push(padding(' ') + ((ref2 = cell ? typeof cell.trim === \"function\" ? cell.trim() : void 0 : void 0) ? ref2 : '') + padding(' '));\r\n\t\t\t}\r\n\t\t\tcontent.push(results);\r\n\t\t}\r\n\t\twidths = [];\r\n\t\tfor (i = j = 0, ref2 = columns - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\r\n\t\t\tresults = [];\r\n\t\t\tfor (k = 0, len1 = content.length; k < len1; k++) {\r\n\t\t\t\tcells = content[k];\r\n\t\t\t\tresults.push(cells[i].length);\r\n\t\t\t}\r\n\t\t\twidths.push(Math.max.apply(Math, [2].concat(results)));\r\n\t\t}\r\n\t\tjust = function(string, col) {\r\n\t\t\tvar back, front, length;\r\n\t\t\tlength = widths[col] - string.length;\r\n\t\t\tswitch (justify[col]) {\r\n\t\t\t\tcase '::':\r\n\t\t\t\t\tfront = padding[0], back = padding[1];\r\n\t\t\t\t\treturn padding(length / 2) + string + padding((length + 1) / 2);\r\n\t\t\t\tcase '-:':\r\n\t\t\t\t\treturn padding(length) + string;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn string + padding(length);\r\n\t\t\t}\r\n\t\t};\r\n\t\tformatted = [];\r\n\t\tfor (j = 0, len1 = content.length; j < len1; j++) {\r\n\t\t\tcells = content[j];\r\n\t\t\tresults = [];\r\n\t\t\tfor (i = k = 0, ref2 = columns - 1; 0 <= ref2 ? k <= ref2 : k >= ref2; i = 0 <= ref2 ? ++k : --k) {\r\n\t\t\t\tresults.push(just(cells[i], i));\r\n\t\t\t}\r\n\t\t\tformatted.push(addTailPipes(joinCells(results)));\r\n\t\t}\r\n\t\tformatline = addTailPipes(joinCells((function() {\r\n\t\t\tvar j, ref2, ref3, results;\r\n\t\t\tresults = [];\r\n\t\t\tfor (i = j = 0, ref2 = columns - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\r\n\t\t\t\tref3 = justify[i], front = ref3[0], back = ref3[1];\r\n\t\t\t\tresults.push(front + padding(widths[i] - 2, '-') + back);\r\n\t\t\t}\r\n\t\t\treturn results;\r\n\t\t})()));\r\n\t\tformatted.splice(formatrow, 0, formatline);\r\n\t\tvar result = (headerline.length === 0 && text[1] !== '' ? '\\n' : '') + formatted.join('\\n');\r\n\t\t\tif(appendNewline !== false) {\r\n\t\t\t\t result += '\\n'\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t}\r\n\r\n\t\tif(chunk.before.slice(-1) !== '\\n') {\r\n\t\t\tchunk.before += '\\n';\r\n\t\t}\r\n\tvar match = chunk.selection.match(regex);\r\n\tif (match) {\r\n\t\tchunk.selection = formatTable(match, chunk.selection.slice(-1) === '\\n');\r\n\t} else {\r\n\t\tvar table = chunk.selection + '|\\n-|-\\n|';\r\n\t\t\tmatch = table.match(regex);\r\n\t\t\tif(!match || match[0].slice(0, table.length) !== table) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\ttable = formatTable(match);\r\n\t\t\tvar selectionOffset = keepFirstAndLastPipes ? 1 : 0;\r\n\t\t\tvar pipePos = table.indexOf('|', selectionOffset);\r\n\t\tchunk.before += table.slice(0, selectionOffset);\r\n\t\tchunk.selection = table.slice(selectionOffset, pipePos);\r\n\t\tchunk.after = table.slice(pipePos) + chunk.after;\r\n\t}\r\n};\r\n\r\ncommandProto.doHeading = function(chunk) {\r\n\r\n\t// Remove leading/trailing whitespace and reduce internal spaces to single spaces.\r\n\tchunk.selection = chunk.selection.replace(/\\s+/g, \" \");\r\n\tchunk.selection = chunk.selection.replace(/(^\\s+|\\s+$)/g, \"\");\r\n\r\n\t// If we clicked the button with no selected text, we just\r\n\t// make a level 2 hash header around some default text.\r\n\tif (!chunk.selection) {\r\n\t\tchunk.startTag = \"## \";\r\n\t\tchunk.selection = this.getString(\"headingexample\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar headerLevel = 0; // The existing header level of the selected text.\r\n\r\n\t// Remove any existing hash heading markdown and save the header level.\r\n\tchunk.findTags(/#+[ ]*/, /[ ]*#+/);\r\n\tif (/#+/.test(chunk.startTag)) {\r\n\t\theaderLevel = re.lastMatch.length;\r\n\t}\r\n\tchunk.startTag = chunk.endTag = \"\";\r\n\r\n\t// Try to get the current header level by looking for - and = in the line\r\n\t// below the selection.\r\n\tchunk.findTags(null, /\\s?(-+|=+)/);\r\n\tif (/=+/.test(chunk.endTag)) {\r\n\t\theaderLevel = 1;\r\n\t}\r\n\tif (/-+/.test(chunk.endTag)) {\r\n\t\theaderLevel = 2;\r\n\t}\r\n\r\n\t// Skip to the next line so we can create the header markdown.\r\n\tchunk.startTag = chunk.endTag = \"\";\r\n\tchunk.skipLines(1, 1);\r\n\r\n\t// We make a level 2 header if there is no current header.\r\n\t// If there is a header level, we substract one from the header level.\r\n\t// If it's already a level 1 header, it's removed.\r\n\tvar headerLevelToCreate = headerLevel === 0 ? 2 : headerLevel - 1;\r\n\r\n\tif (headerLevelToCreate > 0) {\r\n\r\n\t\tchunk.startTag = '';\r\n\t\twhile (headerLevelToCreate--) {\r\n\t\t\tchunk.startTag += '#';\r\n\t\t}\r\n\t\tchunk.startTag += ' ';\r\n\t}\r\n};\r\n\r\ncommandProto.doHorizontalRule = function(chunk) {\r\n\tchunk.startTag = \"----------\\n\";\r\n\tchunk.selection = \"\";\r\n\tchunk.skipLines(2, 1, true);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/pagedown.js\n **/"],"sourceRoot":""}